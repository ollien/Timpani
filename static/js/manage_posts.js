document.addEventListener("DOMContentLoaded",function(e){var t=document.querySelector(".modal"),o=new Modal(t);o.positiveButton=o.element.querySelector("button.positive");var n=document.querySelectorAll("a.button.delete"),i=document.querySelector("span.delete-post-title");o.element.addEventListener("positive-pressed",function(e){e.preventDefault();var t=o.element.getAttribute("post-id"),n=new XMLHttpRequest;n.open("POST","/delete_post/"+t),n.addEventListener("load",function(e){var i=JSON.parse(n.responseText);if(0===i.error){o.positiveButton.classList.remove("working"),o.positiveButton.disabled=!1,o.hide();var r=document.querySelector('li[post-id="'+t+'"]');r.addEventListener("transitionend",function(e){this.remove()}),r.classList.add("deleting")}else 1===i.error&&(window.location="/login")}),o.positiveButton.disabled=!0,o.positiveButton.classList.add("working"),n.send()}),Array.prototype.slice.call(n).forEach(function(e){e.addEventListener("click",function(n){var r=e.parentNode.parentNode,s=r.querySelector("a.post-title").textContent;t.setAttribute("post-id",r.getAttribute("post-id")),i.textContent=s,o.show()})})});