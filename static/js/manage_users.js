document.addEventListener("DOMContentLoaded",function(e){var t=document.getElementById("add-user-modal"),n=new Modal(t);n.positiveButton=n.element.querySelector("button.positive");var o=document.getElementById("add-user-button"),d=document.getElementById("username-input"),a=document.getElementById("full-name-input"),r=document.getElementById("password-input"),i=(document.getElementById("confirm-password-input"),document.getElementById("can-change-settings-checkbox")),u=document.getElementById("can-write-posts-checkbox");o.addEventListener("click",function(e){n.show()}),n.element.addEventListener("positive-pressed",function(e){e.preventDefault(),n.positiveButton.classList.add("working");var t=new FormData;t.append(d.getAttribute("name"),d.value),t.append(a.getAttribute("name"),a.value),t.append(r.getAttribute("name"),r.value),i.checked&&t.append(i.getAttribute("name"),"on"),u.chceked&&t.append(u.getAttribute("name"),"on");var o=new XMLHttpRequest;o.open("POST","/create_user"),o.addEventListener("load",function(e){var t=JSON.parse(o.responseText);n.positiveButton.classList.remove("working"),0===t.error?n.hide():1===t.error?window.location="/login":2===t.error}),o.send(t)})});