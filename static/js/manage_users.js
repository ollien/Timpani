document.addEventListener("DOMContentLoaded",function(e){var t=document.getElementById("add-user-modal"),n=new Modal(t);n.positiveButton=n.element.querySelector("button.positive");var d=document.getElementById("add-user-button"),a=document.getElementById("users-list"),o=document.getElementById("create-user-form"),r=document.getElementById("username-input"),u=document.getElementById("full-name-input"),i=document.getElementById("password-input"),s=document.getElementById("confirm-password-input"),c=document.getElementById("can-change-settings-checkbox"),l=document.getElementById("can-write-posts-checkbox");d.addEventListener("click",function(e){n.show()}),o.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation(),n.positiveButton.classList.add("working");var t=new FormData;t.append(r.getAttribute("name"),r.value),t.append(u.getAttribute("name"),u.value),t.append(i.getAttribute("name"),i.value),c.checked&&t.append(c.getAttribute("name"),"on"),l.checked&&t.append(l.getAttribute("name"),"on");var d=new XMLHttpRequest;d.open("POST","/create_user"),d.addEventListener("load",function(e){var t=JSON.parse(d.responseText);if(n.positiveButton.classList.remove("working"),0===t.error){var o=t.user_id,u=document.createElement("li");u.setAttribute("user_id",o),u.classList.add("user");var i=document.createElement("span");i.classList.add("usenrame"),i.textContent=r.value,u.appendChild(i),a.appendChild(u),n.hide()}else 1===t.error?window.location="/login":2===t.error}),d.send(t)}),n.element.addEventListener("positive-pressed",function(e){e.preventDefault(),o.dispatchEvent(new Event("submit"))}),n.element.addEventListener("hide",function(e){r.value="",u.value="",i.value="",s.value="",c.checked=!1,l.checked=!1})});